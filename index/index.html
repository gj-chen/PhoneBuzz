<!DOCTYPE html>
<html lang="en"> <!-- Set this to the main language of your site -->
<head>
    <meta charset="utf-8">
    
    <title>PhoneBuzz</title>
 
    <meta name="description" content="Web application created to play PhoneBuzz integrated with Twilio API">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Add normalize.css which enables browsers to render all elements more consistently and in line with modern standards as it only targets particular styles that need normalizing -->
    <link href="normalize.css" rel="stylesheet" media="all">
    
    <!-- Include the site stylesheet -->
    <link href="styles.css" rel="stylesheet" media="all">

    <!-- LOAD JQUERY -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <!-- LOAD ANGULAR -->
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.0/angular.min.js"></script>
    <script src="newserver.js"></script>

    <!-- PROCESS FORM WITH AJAX (NEW) -->
    <script>
    // define angular module/app
    var formApp = angular.module('formApp', []);
    // create angular controller and pass in $scope and $http
    formApp.controller('formController', [$scope, function($scope){
        $scope.formData = {};

        //process the form 
        $scope.processForm = function(){
            $http({
                method:'POST',
                url: '/getnumber',
                data: $.param($scope.formData), //pass in data as strings 
                headers: {'Content-Type': 'application/x-www-form-urlencoded'}
            });
        };
    }]);
  </script>
    
</head>
<body ng-app = "formApp" ng-controller = "formController">
    <h1>PhoneBuzz</h1>
            <section>             
                    <h3>Instructions</h3>
                    <!-- Content -->
                    <p>To play PhoneBuzz, dial 925-660-7526 and enter a number.</p>
                    <p>To play Call Me PhoneBuzz, enter your number below and press enter.</p> 
                    <p>Don't forget to enter the time delay. To have no time delay, enter 0.</p>
                    <p>Please only input only the 10 digit number: Ex: 5102891555</p>
                    
            <form ng-submit = "processForm">
                <label>Phone Number</label>
                <input type="text" name="phonenumber" placeholder="Phone Number" ng-model="formData.phonenumber">
                
                <label>Time Delay</label>
                <input type="text" name="timedelay" placeholder="Time Delay" ng-model="formData.timedelay">
                
                <input type="submit" id="submit" value="Submit"/>
            </form>
            </section>
    

     <!-- PROCESS FORM WITH AJAX (NEW) -->
    <script>
    // define angular module/app
    var formApp = angular.module('formApp', []);
    // create angular controller and pass in $scope and $http
    formApp.controller('formController', [$scope, function($scope){
        $scope.formData = {};

        //process the form 
        $scope.processForm = function(){
            $http({
                method:'POST',
                url: '/getnumber',
                data: $.param($scope.formData), //pass in data as strings 
                headers: {'Content-Type': 'application/x-www-form-urlencoded'}
            });
        };
    }]);
  </script>
</body> 
</html>